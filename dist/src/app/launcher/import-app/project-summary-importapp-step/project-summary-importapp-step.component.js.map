{"version":3,"sources":["../../../../../../src/app/launcher/import-app/project-summary-importapp-step/project-summary-importapp-step.component.ts"],"names":[],"mappings":"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","file":"project-summary-importapp-step.component.js","sourceRoot":"","sourcesContent":["import {\n  Component,\n  Host,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewEncapsulation,\n  ViewChild\n} from '@angular/core';\nimport { Subscription } from 'rxjs/Subscription';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { defaults } from 'lodash';\n\nimport { Pipeline } from '../../model/pipeline.model';\nimport { DependencyCheckService } from '../../service/dependency-check.service';\nimport { ProjectSummaryService } from '../../service/project-summary.service';\nimport { Selection } from '../../model/selection.model';\nimport { LauncherComponent } from '../../launcher.component';\nimport { LauncherStep } from '../../launcher-step';\nimport { DependencyCheck } from '../../model/dependency-check.model';\nimport { Summary } from '../../model/summary.model';\nimport { broadcast } from '../../shared/telemetry.decorator';\nimport { NgForm } from '@angular/forms';\n\n\nexport class ProjectSummaryImportappStepComponent extends LauncherStep implements OnDestroy, OnInit {\n   form: NgForm;\n   id: string;\n\n  public setUpErrResponse: Array<any> = [];\n  public savedProjectName: string;\n  public showAppNameInput: boolean = false;\n  private subscriptions: Subscription[] = [];\n  private spaceId: string;\n  private spaceName: string;\n\n  constructor( public launcherComponent: LauncherComponent,\n              private dependencyCheckService: DependencyCheckService,\n              private projectSummaryService: ProjectSummaryService,\n              public _DomSanitizer: DomSanitizer) {\n    super();\n  }\n\n  ngOnInit() {\n    this.launcherComponent.addStep(this);\n    this.restoreSummary();\n\n    this.subscriptions.push(\n      this.dependencyCheckService.getDependencyCheck()\n        .subscribe((val) => {\n          // Don't override user's application name\n          defaults(this.launcherComponent.summary.dependencyCheck, val);\n        })\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.forEach((sub) => {\n      sub.unsubscribe();\n    });\n  }\n\n  // Accessors\n\n  get applicationName(): string {\n    return (this.dependencyCheck.projectName !== undefined) ? this.dependencyCheck.projectName : 'New Application';\n  }\n\n  /**\n   * Returns indicator that step is completed\n   *\n   * @returns {boolean} True if step is completed\n   */\n  get completed(): boolean {\n    if (this.launcherComponent.selectedSection !== 'ProjectSummary' || this.form.invalid) {\n      return false;\n    }\n    for (let i = 0; i < this.launcherComponent.steps.length - 1; i++) {\n      let step = this.launcherComponent.steps[i];\n      if (!(step.optional === true || step.completed === true) && step.hidden !== true) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  // Steps\n\n  /**\n   * Navigate to next step\n   */\n  navToNextStep(): void {\n    this.launcherComponent.navToNextStep('ProjectSummary');\n  }\n\n  /**\n   * Navigate to step\n   *\n   * @param {string} id The step ID\n   */\n  navToStep(id: string) {\n    this.launcherComponent.stepIndicator.navToStep(id);\n  }\n\n  showStep(id: string) {\n    this.launcherComponent.showStep(id);\n  }\n\n  /**\n   * Set up this application\n   */\n  @broadcast('completeSummaryStep_Import', {\n    'launcherComponent.summary': {\n      location: 'gitHubDetails.organization',\n      pipeline: 'pipeline.name',\n      projectName: 'dependencyCheck.projectName',\n      repository: 'gitHubDetails.repository',\n      spacePath: 'dependencyCheck.spacePath',\n      username: 'gitHubDetails.login'\n    }\n  })\n  setup(): void {\n    this.subscriptions.push(\n      this.projectSummaryService\n        .setup(this.launcherComponent.summary)\n        .subscribe((val: any) => {\n          if (val && val['uuid_link']) {\n            this.launcherComponent.statusLink = val['uuid_link'];\n            this.navToNextStep();\n          }\n        }, (error) => {\n          if (error) {\n            this.displaySetUpErrorResponse(error);\n          }\n          console.log('error in setup: Import', error);\n        })\n    );\n  }\n\n  get dependencyCheck(): DependencyCheck {\n    return this.launcherComponent.summary.dependencyCheck;\n  }\n\n  get summary(): Summary {\n    return this.launcherComponent.summary;\n  }\n\n  // Private\n\n  // Restore mission & runtime summary\n  private restoreSummary(): void {\n    let selection: Selection = this.launcherComponent.selectionParams;\n    if (selection === undefined) {\n      return;\n    }\n    this.launcherComponent.summary.dependencyCheck.groupId = selection.groupId;\n    this.launcherComponent.summary.dependencyCheck.projectName = selection.projectName;\n    this.launcherComponent.summary.dependencyCheck.projectVersion = selection.projectVersion;\n    this.launcherComponent.summary.dependencyCheck.spacePath = selection.spacePath;\n  }\n\n  private hideAppNameEdit(): void {\n    this.dependencyCheck.projectName = this.savedProjectName;\n    this.showAppNameInput = false;\n  }\n\n  private showAppNameEdit(): void {\n    this.savedProjectName = this.dependencyCheck.projectName;\n    this.showAppNameInput = true;\n  }\n\n  private toggleExpanded(pipeline: Pipeline) {\n    pipeline.expanded = (pipeline.expanded !== undefined) ? !pipeline.expanded : true;\n  }\n\n    /**\n     * displaySetUpErrorResponse - takes a message string and returns nothing\n     * Displays the response received from the setup in case of error\n     */\n    private displaySetUpErrorResponse(err: any): void {\n      let notification = {\n          iconClass: 'pficon-error-circle-o',\n          alertClass: 'alert-danger',\n          text: err\n      };\n      this.setUpErrResponse.push(notification);\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  encapsulation: ViewEncapsulation.None,\n  selector: 'f8launcher-projectsummary-importapp-step',\n  templateUrl: './project-summary-importapp-step.component.html',\n  styleUrls: ['./project-summary-importapp-step.component.less']\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: LauncherComponent, decorators: [{ type: Host }, ]},\n{type: DependencyCheckService, },\n{type: ProjectSummaryService, },\n{type: DomSanitizer, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'form': [{ type: ViewChild, args: ['form', ] },],\n'id': [{ type: Input },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}