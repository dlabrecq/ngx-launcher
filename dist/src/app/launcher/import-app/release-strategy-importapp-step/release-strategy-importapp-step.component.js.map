{"version":3,"sources":["../../../../../../src/app/launcher/import-app/release-strategy-importapp-step/release-strategy-importapp-step.component.ts"],"names":[],"mappings":"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","file":"release-strategy-importapp-step.component.js","sourceRoot":"","sourcesContent":["import {\n  Component,\n  Host,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewEncapsulation } from '@angular/core';\nimport { Subscription } from 'rxjs/Subscription';\n\nimport {\n  Filter,\n  FilterConfig,\n  FilterField,\n  FilterEvent,\n  FilterType\n} from 'patternfly-ng/filter';\n\nimport {\n  SortConfig,\n  SortField,\n  SortEvent\n} from 'patternfly-ng/sort';\n\nimport { ToolbarConfig } from 'patternfly-ng/toolbar';\n\nimport { PipelineService } from '../../service/pipeline.service';\nimport { Pipeline } from '../../model/pipeline.model';\nimport { Selection } from '../../model/selection.model';\nimport { LauncherComponent } from '../../launcher.component';\nimport { LauncherStep } from '../../launcher-step';\nimport { broadcast } from '../../shared/telemetry.decorator';\n\n\nexport class ReleaseStrategyImportappStepComponent extends LauncherStep implements OnInit, OnDestroy {\n   id: string;\n   optional: boolean = false;\n\n  toolbarConfig: ToolbarConfig;\n\n  private allPipelines: Pipeline[];\n  private filterConfig: FilterConfig;\n  private isAscendingSort: boolean = true;\n  private _pipelines: Pipeline[];\n  private _pipelineId: string;\n  private sortConfig: SortConfig;\n  private currentSortField: SortField;\n\n  private subscriptions: Subscription[] = [];\n\n  constructor( public launcherComponent: LauncherComponent,\n              private pipelineService: PipelineService) {\n    super();\n  }\n\n  ngOnInit() {\n    this.filterConfig = {\n      fields: [{\n        id: 'name',\n        title: 'Name',\n        placeholder: 'Filter by Name...',\n        type: FilterType.TEXT\n      }] as FilterField[],\n      appliedFilters: []\n    } as FilterConfig;\n\n    this.sortConfig = {\n      fields: [{\n        id: 'name',\n        title: 'Name',\n        sortType: 'alpha'\n      }],\n      isAscending: this.isAscendingSort\n    } as SortConfig;\n\n    this.toolbarConfig = {\n      filterConfig: this.filterConfig,\n      sortConfig: this.sortConfig\n    } as ToolbarConfig;\n\n    this.launcherComponent.addStep(this);\n\n    this.subscriptions.push(this.pipelineService.getPipelines().subscribe((result: Array<Pipeline>) => {\n      this._pipelines = result;\n      this.restoreSummary();\n    }));\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.forEach((sub) => {\n      sub.unsubscribe();\n    });\n  }\n\n  // Accessors\n\n  /**\n   * Returns a list of pipelines to display\n   *\n   * @returns {Pipeline[]} The list of pipelines\n   */\n  get pipelines(): Pipeline[] {\n    return this._pipelines;\n  }\n\n  /**\n   * Returns pipeline ID\n   *\n   * @returns {string} The pipeline ID\n   */\n  get pipelineId(): string {\n    return this._pipelineId;\n  }\n\n  /**\n   * Set the pipeline ID\n   *\n   * @param {string} val The pipeline ID\n   */\n  set pipelineId(val: string) {\n    this._pipelineId = val;\n  }\n\n  /**\n   * Returns indicator that step is completed\n   *\n   * @returns {boolean} True if step is completed\n   */\n  get completed(): boolean {\n    return (this.launcherComponent.summary.pipeline !== undefined);\n  }\n\n  // Filter\n\n  applyFilters(filters: Filter[]): void {\n    this._pipelines = [];\n    if (filters && filters.length > 0) {\n      this.allPipelines.forEach((pipeline) => {\n        if (this.matchesFilters(pipeline, filters)) {\n          this._pipelines.push(pipeline);\n        }\n      });\n    } else {\n      this._pipelines = this.allPipelines;\n    }\n  }\n\n  // Handle filter changes\n  filterChanged($event: FilterEvent): void {\n    this.applyFilters($event.appliedFilters);\n  }\n\n  matchesFilter(item: any, filter: Filter): boolean {\n    let match = true;\n    if (filter.field.id === 'name') {\n      match = item.name.match(filter.value) !== null;\n    }\n    return match;\n  }\n\n  matchesFilters(item: any, filters: Filter[]): boolean {\n    let matches = true;\n    filters.forEach((filter) => {\n      if (!this.matchesFilter(item, filter)) {\n        matches = false;\n        return matches;\n      }\n    });\n    return matches;\n  }\n\n  // Sort\n\n  compare(item1: any, item2: any): number {\n    let compValue = 0;\n    if (this.currentSortField.id === 'name') {\n      compValue = item1.name.localeCompare(item2.name);\n    }\n    if (!this.isAscendingSort) {\n      compValue = compValue * -1;\n    }\n    return compValue;\n  }\n\n  // Handle sort changes\n  sortChanged($event: SortEvent): void {\n    this.currentSortField = $event.field;\n    this.isAscendingSort = $event.isAscending;\n    this._pipelines.sort((item1: any, item2: any) => this.compare(item1, item2));\n  }\n\n  // Steps\n  @broadcast('completePipelineStep_Import', {\n    'launcherComponent.summary.pipeline': {\n      pipeline: 'name'\n    }\n  })\n  navToNextStep(): void {\n    this.launcherComponent.navToNextStep('ReleaseStrategy');\n  }\n\n  showStep(id: string, reset: boolean): void {\n    if (reset) {\n      this.launcherComponent.summary.pipeline = undefined;\n    }\n    this.launcherComponent.showStep(id);\n  }\n\n  updatePipelineSelection(pipeline: Pipeline): void {\n    this.launcherComponent.summary.pipeline = pipeline;\n  }\n\n  // Private\n\n  // Restore mission & runtime summary\n  private restoreSummary(): void {\n    let selection: Selection = this.launcherComponent.selectionParams;\n    if (selection === undefined) {\n      return;\n    }\n    this.pipelineId = selection.pipelineId;\n    for (let i = 0; i < this.pipelines.length; i++) {\n      if (this.pipelineId === this.pipelines[i].id) {\n        this.launcherComponent.summary.pipeline = this.pipelines[i];\n      }\n    }\n  }\n\n  private toggleExpanded(pipeline: Pipeline) {\n    pipeline.expanded = (pipeline.expanded !== undefined) ? !pipeline.expanded : false;\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  encapsulation: ViewEncapsulation.None,\n  selector: 'f8launcher-releasestrategy-importapp-step',\n  templateUrl: './release-strategy-importapp-step.component.html',\n  styleUrls: ['./release-strategy-importapp-step.component.less']\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: LauncherComponent, decorators: [{ type: Host }, ]},\n{type: PipelineService, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'id': [{ type: Input },],\n'optional': [{ type: Input },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}