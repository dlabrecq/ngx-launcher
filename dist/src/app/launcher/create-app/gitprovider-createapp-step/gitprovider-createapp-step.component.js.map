{"version":3,"sources":["../../../../../../src/app/launcher/create-app/gitprovider-createapp-step/gitprovider-createapp-step.component.ts"],"names":[],"mappings":"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","file":"gitprovider-createapp-step.component.js","sourceRoot":"","sourcesContent":["import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  Host,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { Subscription } from 'rxjs/Subscription';\n\nimport { DependencyCheckService } from '../../service/dependency-check.service';\nimport { GitProviderService } from '../../service/git-provider.service';\nimport { Selection } from '../../model/selection.model';\nimport { LauncherComponent } from '../../launcher.component';\nimport { LauncherStep } from '../../launcher-step';\nimport { broadcast } from '../../shared/telemetry.decorator';\n\n\nexport class GitproviderCreateappStepComponent extends LauncherStep implements AfterViewInit, OnDestroy, OnInit {\n   form: NgForm;\n   versionSelect: ElementRef;\n\n  private subscriptions: Subscription[] = [];\n\n  constructor( public launcherComponent: LauncherComponent,\n              private dependencyCheckService: DependencyCheckService,\n              private gitProviderService: GitProviderService) {\n    super();\n  }\n\n  ngAfterViewInit() {\n    if (this.launcherComponent.summary.gitHubDetails.login) {\n      setTimeout(() => {\n        if (this.versionSelect) {\n          this.versionSelect.nativeElement.focus();\n        }\n      }, 10);\n    }\n  }\n\n  ngOnInit() {\n    this.launcherComponent.addStep(this);\n\n    this.subscriptions.push(this.gitProviderService.getGitHubDetails().subscribe((val) => {\n      if (val !== undefined) {\n        this.launcherComponent.summary.gitHubDetails = val;\n        this.getGitHubRepos();\n      }\n    }));\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.forEach((sub) => {\n      sub.unsubscribe();\n    });\n  }\n\n  // Accessors\n\n  /**\n   * Returns indicator that step is completed\n   *\n   * @returns {boolean} True if step is completed\n   */\n  get completed(): boolean {\n    return this.form.valid;\n  }\n\n  // Steps\n\n  /**\n   * Navigate to next step\n   */\n  @broadcast('completeGitProviderStep_Create', {\n    'launcherComponent.summary.gitHubDetails': {\n      location: 'organization',\n      repository: 'repository',\n      username: 'login'\n    }\n  })\n\n  navToNextStep(): void {\n    this.launcherComponent.navToNextStep('GitProvider');\n    const summary = this.launcherComponent.summary;\n  }\n\n  showStep(id: string, reset: boolean): void {\n    if (reset) {\n      this.launcherComponent.summary.gitHubDetails.repository = undefined;\n    }\n    this.launcherComponent.showStep(id);\n  }\n\n  /**\n   * Authorize GitHub account\n   *\n   * @param {MouseEvent} $event\n   */\n  connectAccount($event: MouseEvent): void {\n    let url = window.location.href + this.getParams(this.launcherComponent.currentSelection);\n    this.gitProviderService.connectGitHubAccount(url);\n  }\n\n  /**\n   * get all repos List for the selected organization\n   */\n  getGitHubRepos(): void {\n    if (this.launcherComponent && this.launcherComponent.summary &&\n      this.launcherComponent.summary.gitHubDetails) {\n      this.launcherComponent.summary.gitHubDetails.repository =\n        this.launcherComponent.summary.dependencyCheck ?\n          this.launcherComponent.summary.dependencyCheck.projectName : '';\n    }\n  }\n\n  // Private\n\n  private getParams(selection: Selection) {\n    if (selection === undefined) {\n      return '';\n    }\n    return '?selection=' + encodeURI(JSON.stringify(selection));\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  encapsulation: ViewEncapsulation.None,\n  selector: 'f8launcher-gitprovider-createapp-step',\n  templateUrl: './gitprovider-createapp-step.component.html',\n  styleUrls: ['./gitprovider-createapp-step.component.less']\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: LauncherComponent, decorators: [{ type: Host }, ]},\n{type: DependencyCheckService, },\n{type: GitProviderService, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'form': [{ type: ViewChild, args: ['form', ] },],\n'versionSelect': [{ type: ViewChild, args: ['versionSelect', ] },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}