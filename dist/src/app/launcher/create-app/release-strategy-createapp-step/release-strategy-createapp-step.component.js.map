{"version":3,"sources":["../../../../../../src/app/launcher/create-app/release-strategy-createapp-step/release-strategy-createapp-step.component.ts"],"names":[],"mappings":"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","file":"release-strategy-createapp-step.component.js","sourceRoot":"","sourcesContent":["import {\n  Component,\n  Host,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewEncapsulation } from '@angular/core';\nimport { Subscription } from 'rxjs/Subscription';\n\nimport { PipelineService } from '../../service/pipeline.service';\nimport { Pipeline } from '../../model/pipeline.model';\nimport { Selection } from '../../model/selection.model';\nimport { LauncherComponent } from '../../launcher.component';\nimport { LauncherStep } from '../../launcher-step';\nimport { broadcast } from '../../shared/telemetry.decorator';\n\n\nexport class ReleaseStrategyCreateappStepComponent extends LauncherStep implements OnInit, OnDestroy {\n   id: string;\n\n  private _pipelines: Pipeline[];\n  private _pipelineId: string;\n\n  private subscriptions: Subscription[] = [];\n\n  constructor( public launcherComponent: LauncherComponent,\n              private pipelineService: PipelineService) {\n    super();\n  }\n\n  ngOnInit() {\n    this.launcherComponent.addStep(this);\n    let filterByRuntime: string = 'maven';\n    if (this.launcherComponent && this.launcherComponent.summary && this.launcherComponent.summary.runtime) {\n      filterByRuntime = this.launcherComponent.summary.runtime.pipelinePlatform;\n    }\n    this.subscriptions.push(this.pipelineService.getPipelines(filterByRuntime).subscribe((result: Array<Pipeline>) => {\n      this._pipelines = result;\n      this.restoreSummary();\n    }));\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.forEach((sub) => {\n      sub.unsubscribe();\n    });\n  }\n\n  // Accessors\n\n  /**\n   * Returns a list of pipelines to display\n   *\n   * @returns {Pipeline[]} The list of pipelines\n   */\n  get pipelines(): Pipeline[] {\n    return this._pipelines;\n  }\n\n  /**\n   * Returns pipeline ID\n   *\n   * @returns {string} The pipeline ID\n   */\n  get pipelineId(): string {\n    return this._pipelineId;\n  }\n\n  /**\n   * Set the pipeline ID\n   *\n   * @param {string} val The pipeline ID\n   */\n  set pipelineId(val: string) {\n    this._pipelineId = val;\n  }\n\n  /**\n   * Returns indicator that step is completed\n   *\n   * @returns {boolean} True if step is completed\n   */\n  get completed(): boolean {\n    return (this.launcherComponent.summary.pipeline !== undefined);\n  }\n\n  // Steps\n  @broadcast('completePipelineStep_Create', {\n    'launcherComponent.summary.pipeline': {\n      pipeline: 'name'\n    }\n  })\n\n  navToNextStep(): void {\n    this.launcherComponent.navToNextStep('ReleaseStrategy');\n  }\n\n  showStep(id: string, reset: boolean): void {\n    if (reset) {\n      this.launcherComponent.summary.pipeline = undefined;\n    }\n    this.launcherComponent.showStep(id);\n  }\n\n  updatePipelineSelection(pipeline: Pipeline): void {\n    this.launcherComponent.summary.pipeline = pipeline;\n  }\n\n  // Private\n\n  // Restore mission & runtime summary\n  private restoreSummary(): void {\n    let selection: Selection = this.launcherComponent.selectionParams;\n    if (selection === undefined) {\n      return;\n    }\n    this.pipelineId = selection.pipelineId;\n    for (let i = 0; i < this.pipelines.length; i++) {\n      if (this.pipelineId === this.pipelines[i].id) {\n        this.launcherComponent.summary.pipeline = this.pipelines[i];\n      }\n    }\n  }\n\n  private toggleExpanded(pipeline: Pipeline) {\n    pipeline.expanded = (pipeline.expanded !== undefined) ? !pipeline.expanded : true;\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  encapsulation: ViewEncapsulation.None,\n  selector: 'f8launcher-releasestrategy-createapp-step',\n  templateUrl: './release-strategy-createapp-step.component.html',\n  styleUrls: ['./release-strategy-createapp-step.component.less']\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: LauncherComponent, decorators: [{ type: Host }, ]},\n{type: PipelineService, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'id': [{ type: Input },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}